---
title: "hm-02"
author: "Kendall Beaver"
format: html
editor: visual
---

```{r}
# Sets the number of significant figures to two - e.g., 0.01
options(digits = 2)

# Required package for quick package downloading and loading 
if (!require(pacman))  
  install.packages("pacman")

# Downloads and load required packages
pacman::p_load(dlookr, # Exploratory data analysis
               forecast, # Needed for Box-Cox transformations
               formattable, # HTML tables from R outputs
               here, # Standardizes paths to data
               kableExtra, # Alternative to formattable
               knitr, # Needed to write HTML reports
               missRanger, # To generate NAs
               tidyverse) # Powerful data wrangling package suite

# Let's load a data set from the diabetes data set
# An easy way

#dataset <- read.csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-07-25/scurvy.csv')

dataset <- read_csv(here('owid-energy.csv'))
#dataset
#brazil_dataset <- dataset %>%
#  filter(country == "Brazil")

#brazil_dataset

saudi_and_brazil <- dataset %>%
#  filter(country %in% c("Brazil", "saudia arabia", "Panama")) %>%
#  filter(country == "Brazil & Saudia Arabia" & year >= 1950)
#  filter(iso_code %in% c("SAU")) %>%
  filter(iso_code %in% c("BRA")) %>%  
#  filter(iso_code %in% c("SAU", "BRA")) %>%
#  filter(year >= 1950) %>%
  select(country, iso_code, year, gdp, population, gas_production, oil_production)
  
saudi_and_brazil

#dataset <- read_csv(here('daily_summary.csv'))

# dataset <- read_csv(here('population.csv'))
# source: https://github.com/rfordatascience/tidytuesday/tree/master/data/2023/2023-08-22 ###

saudi_and_brazil |> 
  head() |>
    formattable()

saudi_and_brazil |>
  select(country) |>
  formattable()

saudi_and_brazil |>
  plot_normality()

saudi_and_brazil %>%
  group_by(country) %>%
  select(population) %>%
  plot_normality()

saudi_and_brazil |>
  select(oil_production, gas_production) |>
  describe() |>
  select(described_variables, mean, IQR, skewness) |>
  formattable()
# Gas production is skewed more to the right (1.78) 
# than oil production (0.75).

saudi_and_brazil |>
plot_normality(oil_production, gas_production)
# This is good if I can create two datasets for Brazil and S.A. and
# run them seperately and then quickly look at visual representations
# for GDP, oil and gas production, etc., then quickly make a comparison
# between the two countries then go further in-depth and perform
# additional analysis.

saudi_and_brazil %>% 
  # This "group_by" function below works better for me!!!
  # So, group_by is meant more so for ordinaldata, which the only 
  # piece of ordinal data I have is for "iso_code." But it would be better
  # for me to use the "group_by" because I can simply up Brazil & S.A.
  # without having to create two separate datasets and then run
  # plot_normality.
  group_by(iso_code) %>%
  select(oil_production, gas_production) %>%
  plot_normality()

filtered_column <- saudi_and_brazil |>
  filter(oil_production > 0)
filtered_column
# This is a quick way to just filtered all the data based on one column,
# in this case, oil_prodution, which I'm telling R to show me all data
# > 0 for oil_production, which begins in 1942 for Brazil and 1936 for
# S.A., which makes me wonder if WWII had anything to do with Brazil 
# beginning its production of oil and if so, who was Brazil supplying
# oil to?

######################################################################
# The next EDA exercises will have us look at:
#   sqrt
#   log+1 
#   1/x (inverse)
#   x^2
#   x^3

# I'm re-adding the function for saudi_and_brazil so that I can toggle
# between displaying data for SAU and BRA.

saudi_and_brazil <- dataset %>%
  filter(iso_code %in% c("SAU"))
saudi_and_brazil

sqrt_prod_data <- transform(saudi_and_brazil$oil_production, method = "sqrt")
# sqrtIns <- transform(saudi_and_brazil$gas_production, method = "sqrt")
summary(sqrt_prod_data)

sqrt_prod_data |>
  plot()

Log1_prod_data <- transform(saudi_and_brazil$oil_production, method = "log+1")
summary(Log1_prod_data)

Inv_prod_data <- transform(saudi_and_brazil$oil_production, method = "1/x")
summary(Inv_prod_data)
```
